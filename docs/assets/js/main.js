"use strict";const form=document.querySelector(".js-form"),searchButton=document.querySelector(".search-button");let seriesContainer=document.querySelector(".js-series-container");const favouriteList=document.querySelector(".js-favourite-list");let favourites=getSavedFavouriteList(),series=[];function searchSerie(e){e.preventDefault();const t=document.querySelector(".js-input-serie").value;fetch(`https://api.tvmaze.com/search/shows?q=${t}`).then(e=>e.json()).then(t=>{console.log(t),e.preventDefault(),formatData(t),paintSeries(t),listenSeries()})}function formatData(e){for(let t of e){let e=t.show.name;series.push(e)}}function getSavedFavouriteList(){const e=JSON.parse(localStorage.getItem("favourites"));return null===e?[]:e}function getClassSerie(e){return-1!==favourites.findIndex(t=>t.name===e.show.name)?"serieContainer favourite":"serieContainer"}function getSerieImageUrl(e){return null===e.show.image?`https://via.placeholder.com/210x295/ffffff/666666/?text=${e.show.name}`:e.show.image.original}paintFavouriteSeries();const paintSeries=e=>{seriesContainer.innerHTML="";for(let t of e){let e=t.show.name,i=getSerieImageUrl(t),r=getClassSerie(t);console.log(t.show.genres),seriesContainer.innerHTML+=`<div class="${r}" style="cursor: pointer"><img class="img" src="${i}"><h2 class="titleSerie">${e}</h2><div class="favouriteIconContainer"><i class="fas fa-heart favourite-icon"></i></div></div>`}},listenSeries=()=>{const e=document.querySelectorAll(".serieContainer");for(const t of e)t.addEventListener("click",paintConsole)},toggleFavourites=e=>{const t=e.currentTarget;if(t.classList.toggle("favourite"),t.classList.contains("favourite")){const e={name:t.querySelector("h2").textContent,image:t.querySelector(".img").src};favourites.push(e)}else{const e=favourites.findIndex(e=>e.name===t.querySelector("h2").textContent);favourites.splice(e,1)}saveUpdatedFavouriteList(favourites),paintFavouriteSeries()};function saveUpdatedFavouriteList(e){localStorage.setItem("favourites",JSON.stringify(e))}function removeItemFavourite(e){let t=e.currentTarget.querySelector("h2").textContent;const i=favourites.findIndex(e=>e.name===t);favourites.splice(i,1),saveUpdatedFavouriteList(favourites),paintFavouriteSeries(),paintSeries()}function paintFavouriteSeries(){favouriteList.innerHTML="";for(let e of favourites){const t=e.name,i=e.image;favouriteList.innerHTML+=`<li class="serieContainerList favourite" style="cursor: pointer"><h2 class="title-favourite-list">${t}<i class="fas fa-heart favourite-icon-list"></i></h2><img class="img imgFavourite" src="${i}"></img></li>`}let e=favouriteList.querySelectorAll(".favourite");for(let t of e)t.addEventListener("click",removeItemFavourite)}function showfavouriteList(){document.querySelector(".js-favourite-list").classList.toggle("show")}searchButton.addEventListener("click",searchSerie),form.addEventListener("change",searchSerie);const favouriteMenu=document.querySelector(".js-series-favourite-container");favouriteMenu.addEventListener("click",showfavouriteList),favouriteMenu.addEventListener("click",showfavouriteList);